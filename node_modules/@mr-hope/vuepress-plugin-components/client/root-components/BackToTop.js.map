{"version":3,"file":"BackToTop.js","sources":["../../src/client/define.ts","../../src/client/icons.ts","../../src/client/root-components/BackToTop.ts"],"sourcesContent":["import type { ComponentI18nConfig } from \"../shared\";\n\ndeclare const COMPONENT_I18N: Record<string, ComponentI18nConfig>;\n\nexport const componentI18n = COMPONENT_I18N;\n","import { IconBase } from \"@mr-hope/vuepress-shared/client\";\nimport { h } from \"vue\";\nimport type { FunctionalComponent } from \"vue\";\n\nexport const BacktoTopIcon: FunctionalComponent = () =>\n  h(\n    IconBase,\n    { name: \"back-to-top\" },\n    {\n      default: () =>\n        h(\"path\", {\n          d: \"M512 0C229.517 0 0 229.517 0 512s227.752 512 512 512c282.483 0 512-227.752 512-512C1024 229.517 794.483 0 512 0zM351.338 271.89h305.434c14.125 0 26.483 12.358 26.483 26.482s-12.358 26.483-26.483 26.483H351.338c-14.124 0-26.483-12.358-26.483-26.483 0-15.89 12.359-26.482 26.483-26.482z m331.917 303.669c-12.358 12.358-33.545 12.358-45.903 0L531.42 471.393v270.124c0 14.124-12.359 26.483-26.483 26.483s-26.483-12.359-26.483-26.483v-271.89l-105.93 104.166c-12.36 12.359-33.546 12.359-45.904 0-12.359-12.359-12.359-31.78 0-45.903l155.365-151.835c7.062-7.062 14.124-8.827 22.952-8.827s15.89 3.53 22.952 8.827L683.255 527.89c12.359 15.89 12.359 35.31 0 47.669z\",\n          fill: \"currentColor\",\n        }),\n    }\n  );\n\nBacktoTopIcon.displayName = \"BacktoTopIcon\";\n\nexport const EnterFullScreenIcon: FunctionalComponent = () =>\n  h(\n    IconBase,\n    { name: \"enter-fullscreen\" },\n    {\n      default: () =>\n        h(\"path\", {\n          d: \"M762.773 90.24h-497.28c-96.106 0-174.4 78.293-174.4 174.4v497.28c0 96.107 78.294 174.4 174.4 174.4h497.28c96.107 0 175.04-78.293 174.4-174.4V264.64c0-96.213-78.186-174.4-174.4-174.4zm-387.2 761.173H215.04c-21.867 0-40.427-17.92-41.067-41.066V649.92c0-22.507 17.92-40.427 40.427-40.427 11.307 0 21.227 4.694 28.48 11.947 7.253 7.253 11.947 17.92 11.947 28.48v62.293l145.28-145.28c15.893-15.893 41.813-15.893 57.706 0 15.894 15.894 15.894 41.814 0 57.707l-145.28 145.28h62.294c22.506 0 40.426 17.92 40.426 40.427s-17.173 41.066-39.68 41.066zM650.24 165.76h160.427c21.866 0 40.426 17.92 41.066 41.067v160.426c0 22.507-17.92 40.427-40.426 40.427-11.307 0-21.227-4.693-28.48-11.947-7.254-7.253-11.947-17.92-11.947-28.48v-62.186L625.6 450.347c-15.893 15.893-41.813 15.893-57.707 0-15.893-15.894-15.893-41.814 0-57.707l145.28-145.28H650.88c-22.507 0-40.427-17.92-40.427-40.427s17.174-41.173 39.787-41.173z\",\n          fill: \"currentColor\",\n        }),\n    }\n  );\n\nEnterFullScreenIcon.displayName = \"EnterFullScreenIcon\";\n\nexport const CancelFullScreenIcon: FunctionalComponent = () =>\n  h(\n    IconBase,\n    { name: \"cancel-fullscreen\" },\n    {\n      default: () =>\n        h(\"path\", {\n          d: \"M778.468 78.62H247.922c-102.514 0-186.027 83.513-186.027 186.027V795.08c0 102.514 83.513 186.027 186.027 186.027h530.432c102.514 0 186.71-83.513 186.026-186.027V264.647C964.494 162.02 880.981 78.62 778.468 78.62zM250.88 574.35h171.122c23.324 0 43.122 19.115 43.804 43.805v171.121c0 24.008-19.114 43.122-43.122 43.122-12.06 0-22.641-5.006-30.378-12.743s-12.743-19.115-12.743-30.379V722.83L224.597 877.91c-16.953 16.952-44.6 16.952-61.553 0-16.953-16.954-16.953-44.602 0-61.554L318.009 661.39h-66.446c-24.007 0-43.122-19.114-43.122-43.122 0-24.12 18.432-43.918 42.439-43.918zm521.899-98.873H601.657c-23.325 0-43.122-19.114-43.805-43.804V260.55c0-24.007 19.115-43.122 43.122-43.122 12.06 0 22.642 5.007 30.379 12.743s12.743 19.115 12.743 30.38v66.445l154.965-154.965c16.953-16.953 44.601-16.953 61.554 0 16.953 16.953 16.953 44.6 0 61.554L705.536 388.55h66.446c24.007 0 43.122 19.115 43.122 43.122.114 24.007-18.318 43.804-42.325 43.804z\",\n          fill: \"currentColor\",\n        }),\n    }\n  );\n\nCancelFullScreenIcon.displayName = \"CancelFullScreenIcon\";\n","import { useRouteLocale, usePageFrontmatter } from \"@vuepress/client\";\nimport { useThemeData } from \"@vuepress/plugin-theme-data/lib/client\";\nimport debounce from \"lodash.debounce\";\nimport {\n  Transition,\n  computed,\n  defineComponent,\n  h,\n  onBeforeUnmount,\n  onMounted,\n  ref,\n} from \"vue\";\nimport { componentI18n } from \"../define\";\nimport { BacktoTopIcon } from \"../icons\";\n\nimport \"../styles/back-to-top.scss\";\n\nimport type { VNode } from \"vue\";\n\nexport default defineComponent({\n  name: \"BackToTop\",\n\n  components: { BacktoTopIcon },\n\n  props: {\n    threshold: { type: Number, default: 300 },\n  },\n\n  setup(props) {\n    const pageFrontmatter = usePageFrontmatter();\n    const themeData = useThemeData();\n    const routeLocale = useRouteLocale();\n\n    /** Scroll distance */\n    const scrollTop = ref(0);\n\n    const thresholdDistance = computed<number>(() => {\n      const { backToTop } = themeData.value;\n\n      return typeof backToTop === \"number\" ? backToTop : props.threshold;\n    });\n\n    /** Whether to display button */\n    const show = computed<boolean>(() => {\n      const globalEnable = themeData.value.backToTop !== false;\n      const pageEnable = pageFrontmatter.value.backToTop as boolean;\n\n      return (\n        (pageEnable || (globalEnable && pageEnable !== false)) &&\n        scrollTop.value > thresholdDistance.value\n      );\n    });\n\n    // Get scroll distance\n    const getScrollTop = (): number =>\n      window.pageYOffset ||\n      document.documentElement.scrollTop ||\n      document.body.scrollTop ||\n      0;\n\n    const scrollHandler = debounce(() => {\n      scrollTop.value = getScrollTop();\n    }, 100);\n\n    onMounted(() => {\n      scrollTop.value = getScrollTop();\n      window.addEventListener(\"scroll\", scrollHandler);\n    });\n\n    onBeforeUnmount(() => {\n      window.removeEventListener(\"scroll\", scrollHandler);\n    });\n\n    return (): VNode =>\n      h(\n        Transition,\n        { name: \"fade\" },\n        {\n          default: () =>\n            show.value\n              ? h(\n                  \"button\",\n                  {\n                    class: \"back-to-top\",\n                    // hint text\n                    ariaLabel:\n                      componentI18n[routeLocale.value || \"/\"].backToTop,\n                    \"data-balloon-pos\": \"left\",\n                    // Scroll to top\n                    onClick: () => {\n                      window.scrollTo({ top: 0, behavior: \"smooth\" });\n                      scrollTop.value = 0;\n                    },\n                  },\n                  h(BacktoTopIcon)\n                )\n              : null,\n        }\n      );\n  },\n});\n"],"names":["componentI18n","COMPONENT_I18N","BacktoTopIcon","h","IconBase","name","default","d","fill","displayName","defineComponent","components","props","threshold","type","Number","[object Object]","pageFrontmatter","usePageFrontmatter","themeData","useThemeData","routeLocale","useRouteLocale","scrollTop","ref","thresholdDistance","computed","backToTop","value","show","globalEnable","pageEnable","getScrollTop","window","pageYOffset","document","documentElement","body","scrollHandler","debounce","onMounted","addEventListener","onBeforeUnmount","removeEventListener","Transition","class","ariaLabel","data-balloon-pos","onClick","scrollTo","top","behavior"],"mappings":"qYAIO,MAAMA,EAAgBC,eCAhBC,EAAqC,IAChDC,EACEC,EACA,CAAEC,KAAM,eACR,CACEC,QAAS,IACPH,EAAE,OAAQ,CACRI,EAAG,ipBACHC,KAAM,mBAKhBN,EAAcO,YAAc,gBCE5B,MAAeC,EAAgB,CAC7BL,KAAM,YAENM,WAAY,CAAET,cAAAA,GAEdU,MAAO,CACLC,UAAW,CAAEC,KAAMC,OAAQT,QAAS,MAGtCU,MAAMJ,GACJ,MAAMK,EAAkBC,IAClBC,EAAYC,IACZC,EAAcC,IAGdC,EAAYC,EAAI,GAEhBC,EAAoBC,GAAiB,KACzC,MAAMC,UAAEA,GAAcR,EAAUS,MAEhC,MAA4B,iBAAdD,EAAyBA,EAAYf,EAAMC,aAIrDgB,EAAOH,GAAkB,KAC7B,MAAMI,GAA6C,IAA9BX,EAAUS,MAAMD,UAC/BI,EAAad,EAAgBW,MAAMD,UAEzC,OACGI,GAAeD,IAA+B,IAAfC,IAChCR,EAAUK,MAAQH,EAAkBG,SAKlCI,EAAe,IACnBC,OAAOC,aACPC,SAASC,gBAAgBb,WACzBY,SAASE,KAAKd,WACd,EAEIe,EAAgBC,GAAS,KAC7BhB,EAAUK,MAAQI,MACjB,KAWH,OATAQ,GAAU,KACRjB,EAAUK,MAAQI,IAClBC,OAAOQ,iBAAiB,SAAUH,MAGpCI,GAAgB,KACdT,OAAOU,oBAAoB,SAAUL,MAGhC,IACLnC,EACEyC,EACA,CAAEvC,KAAM,QACR,CACEC,QAAS,IACPuB,EAAKD,MACDzB,EACE,SACA,CACE0C,MAAO,cAEPC,UACE9C,EAAcqB,EAAYO,OAAS,KAAKD,UAC1CoB,mBAAoB,OAEpBC,QAAS,KACPf,OAAOgB,SAAS,CAAEC,IAAK,EAAGC,SAAU,WACpC5B,EAAUK,MAAQ,IAGtBzB,EAAED,IAEJ"}