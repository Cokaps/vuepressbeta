{"version":3,"file":"PhotoSwipe.js","sources":["../../src/client/define.ts","../../src/client/composables/index.ts","../../src/client/root-components/PhotoSwipe.vue","../../src/client/root-components/PhotoSwipe.vue?vue&type=template&id=0a0ccd71&lang.js"],"sourcesContent":["import * as PhotoSwipe from \"photoswipe\";\nimport type { PhowoSwipeI18n } from \"../shared\";\n\ndeclare const IMAGE_CONTAINER: string;\ndeclare const IMAGE_SELECTOR: string;\ndeclare const PHOTOSWIPE_DELAY: number;\ndeclare const PHOTOSWIPE_OPTIONS: PhotoSwipe.Options;\ndeclare const PHOTOSWIPE_I18N: Record<string, PhowoSwipeI18n>;\n\nexport const imageContainer = IMAGE_CONTAINER;\nexport const imageSelector = IMAGE_SELECTOR;\n\nexport const i18n = PHOTOSWIPE_I18N;\n\nexport const delay = PHOTOSWIPE_DELAY;\n\nexport const options = PHOTOSWIPE_OPTIONS;\n","import * as PhotoSwipe from \"photoswipe\";\n\nexport interface PhotoSwipeImageInfo extends PhotoSwipe.Item {\n  title: string;\n}\n\nexport const getImageInfo = (image: HTMLImageElement): PhotoSwipeImageInfo => {\n  return {\n    src: image.src,\n    w: image.naturalWidth,\n    h: image.naturalHeight,\n    title: image.alt,\n  };\n};\n\nexport interface PhotoSwipeImages {\n  elements: HTMLImageElement[];\n  infos: PhotoSwipeImageInfo[];\n}\n\nexport const getImages = (selector: string): Promise<PhotoSwipeImages> => {\n  const promises: Promise<PhotoSwipeImageInfo>[] = [];\n  const images = Array.from(\n    document.querySelectorAll<HTMLImageElement>(selector)\n  );\n\n  images.forEach((image, index) => {\n    promises[index] = new Promise((resolve, reject) => {\n      if (image.complete) resolve(getImageInfo(image));\n      else {\n        image.onload = (): void => resolve(getImageInfo(image));\n        image.onerror = (err): void => reject(err);\n      }\n    });\n  });\n\n  return Promise.all(promises).then((infos) => ({ elements: images, infos }));\n};\n","<template>\n  <!-- Root element of PhotoSwipe. Must have class pswp. -->\n  <div class=\"pswp\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\n    <!-- Background of PhotoSwipe. \n    It’s a separate element, as animating opacity is faster than rgba().-->\n    <div class=\"pswp__bg\" />\n\n    <!-- Slides wrapper with overflow:hidden. -->\n    <div class=\"pswp__scroll-wrap\">\n      <!-- Container that holds slides. PhotoSwipe keeps only 3 slides in DOM to save memory. -->\n      <div class=\"pswp__container\">\n        <!-- don’t modify these 3 pswp__item elements, data is added later on -->\n        <div class=\"pswp__item\" />\n        <div class=\"pswp__item\" />\n        <div class=\"pswp__item\" />\n      </div>\n\n      <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->\n      <div class=\"pswp__ui pswp__ui--hidden\">\n        <div class=\"pswp__top-bar\">\n          <!--  Controls are self-explanatory. Order can be changed. -->\n\n          <div class=\"pswp__counter\" />\n\n          <button\n            class=\"pswp__button pswp__button--close\"\n            :title=\"i18n.close\"\n            :aria-label=\"i18n.close\"\n          />\n\n          <button\n            class=\"pswp__button pswp__button--share\"\n            :title=\"i18n.share\"\n            :aria-label=\"i18n.share\"\n          />\n\n          <button\n            class=\"pswp__button pswp__button--fs\"\n            :title=\"i18n.fullscreen\"\n            :aria-label=\"i18n.fullscreen\"\n          />\n\n          <button\n            class=\"pswp__button pswp__button--zoom\"\n            :title=\"i18n.zoom\"\n            :aria-label=\"i18n.zoom\"\n          />\n\n          <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->\n          <!-- element will get class pswp__preloader--active when preloader is running -->\n          <div class=\"pswp__preloader\">\n            <div class=\"pswp__preloader__icn\">\n              <div class=\"pswp__preloader__cut\">\n                <div class=\"pswp__preloader__donut\" />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div\n          class=\"pswp__share-modal pswp__share-modal--hidden pswp__single-tap\"\n        >\n          <div class=\"pswp__share-tooltip\" />\n        </div>\n\n        <button\n          class=\"pswp__button pswp__button--arrow--left\"\n          :title=\"i18n.prev\"\n          :aria-label=\"i18n.prev\"\n        />\n\n        <button\n          class=\"pswp__button pswp__button--arrow--right\"\n          :title=\"i18n.next\"\n          :aria-label=\"i18n.next\"\n        />\n\n        <div class=\"pswp__caption\">\n          <div class=\"pswp__caption__center\" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { useRouteLocale } from \"@vuepress/client\";\nimport { defineComponent, onMounted, watch } from \"vue\";\nimport { useRoute } from \"vue-router\";\nimport { delay, imageContainer, imageSelector, i18n, options } from \"../define\";\nimport { getImages } from \"../composables\";\n\nimport \"photoswipe/dist/photoswipe.css\";\nimport \"photoswipe/dist/default-skin/default-skin.css\";\n\nexport default defineComponent({\n  name: \"PhotoSwipe\",\n\n  setup() {\n    const route = useRoute();\n    const routeLocale = useRouteLocale();\n\n    const initPhotoSwipe = (): void => {\n      const pswp = document.querySelector(\".pswp\") as HTMLElement;\n\n      void Promise.all([\n        import(/* webpackChunkName: \"photo-swipe\" */ \"photoswipe\"),\n        import(\n          /* webpackChunkName: \"photo-swipe\" */ \"photoswipe/dist/photoswipe-ui-default\"\n        ),\n      ]).then(([photoSwipe, photoSwipeUIDefault]) => {\n        void getImages(imageSelector).then((images) => {\n          images.elements.forEach((image, index) => {\n            image.addEventListener(\"click\", (): void => {\n              const gallery = new photoSwipe.default(\n                pswp,\n                photoSwipeUIDefault.default,\n                images.infos,\n                {\n                  shareButtons:\n                    i18n[routeLocale.value].buttons || i18n[\"/\"].buttons,\n                  ...options,\n                  index,\n                }\n              );\n              gallery.init();\n            });\n          });\n        });\n      });\n    };\n\n    const update = (): void => {\n      const timer = setInterval(() => {\n        const content = document.querySelector<HTMLElement>(imageContainer);\n        if (content) {\n          initPhotoSwipe();\n          clearInterval(timer);\n        }\n      }, delay);\n    };\n\n    watch(\n      () => route.path,\n      () => update()\n    );\n\n    onMounted(() => update());\n\n    return { i18n };\n  },\n});\n</script>\n","<template>\n  <!-- Root element of PhotoSwipe. Must have class pswp. -->\n  <div class=\"pswp\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\n    <!-- Background of PhotoSwipe. \n    It’s a separate element, as animating opacity is faster than rgba().-->\n    <div class=\"pswp__bg\" />\n\n    <!-- Slides wrapper with overflow:hidden. -->\n    <div class=\"pswp__scroll-wrap\">\n      <!-- Container that holds slides. PhotoSwipe keeps only 3 slides in DOM to save memory. -->\n      <div class=\"pswp__container\">\n        <!-- don’t modify these 3 pswp__item elements, data is added later on -->\n        <div class=\"pswp__item\" />\n        <div class=\"pswp__item\" />\n        <div class=\"pswp__item\" />\n      </div>\n\n      <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->\n      <div class=\"pswp__ui pswp__ui--hidden\">\n        <div class=\"pswp__top-bar\">\n          <!--  Controls are self-explanatory. Order can be changed. -->\n\n          <div class=\"pswp__counter\" />\n\n          <button\n            class=\"pswp__button pswp__button--close\"\n            :title=\"i18n.close\"\n            :aria-label=\"i18n.close\"\n          />\n\n          <button\n            class=\"pswp__button pswp__button--share\"\n            :title=\"i18n.share\"\n            :aria-label=\"i18n.share\"\n          />\n\n          <button\n            class=\"pswp__button pswp__button--fs\"\n            :title=\"i18n.fullscreen\"\n            :aria-label=\"i18n.fullscreen\"\n          />\n\n          <button\n            class=\"pswp__button pswp__button--zoom\"\n            :title=\"i18n.zoom\"\n            :aria-label=\"i18n.zoom\"\n          />\n\n          <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->\n          <!-- element will get class pswp__preloader--active when preloader is running -->\n          <div class=\"pswp__preloader\">\n            <div class=\"pswp__preloader__icn\">\n              <div class=\"pswp__preloader__cut\">\n                <div class=\"pswp__preloader__donut\" />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div\n          class=\"pswp__share-modal pswp__share-modal--hidden pswp__single-tap\"\n        >\n          <div class=\"pswp__share-tooltip\" />\n        </div>\n\n        <button\n          class=\"pswp__button pswp__button--arrow--left\"\n          :title=\"i18n.prev\"\n          :aria-label=\"i18n.prev\"\n        />\n\n        <button\n          class=\"pswp__button pswp__button--arrow--right\"\n          :title=\"i18n.next\"\n          :aria-label=\"i18n.next\"\n        />\n\n        <div class=\"pswp__caption\">\n          <div class=\"pswp__caption__center\" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { useRouteLocale } from \"@vuepress/client\";\nimport { defineComponent, onMounted, watch } from \"vue\";\nimport { useRoute } from \"vue-router\";\nimport { delay, imageContainer, imageSelector, i18n, options } from \"../define\";\nimport { getImages } from \"../composables\";\n\nimport \"photoswipe/dist/photoswipe.css\";\nimport \"photoswipe/dist/default-skin/default-skin.css\";\n\nexport default defineComponent({\n  name: \"PhotoSwipe\",\n\n  setup() {\n    const route = useRoute();\n    const routeLocale = useRouteLocale();\n\n    const initPhotoSwipe = (): void => {\n      const pswp = document.querySelector(\".pswp\") as HTMLElement;\n\n      void Promise.all([\n        import(/* webpackChunkName: \"photo-swipe\" */ \"photoswipe\"),\n        import(\n          /* webpackChunkName: \"photo-swipe\" */ \"photoswipe/dist/photoswipe-ui-default\"\n        ),\n      ]).then(([photoSwipe, photoSwipeUIDefault]) => {\n        void getImages(imageSelector).then((images) => {\n          images.elements.forEach((image, index) => {\n            image.addEventListener(\"click\", (): void => {\n              const gallery = new photoSwipe.default(\n                pswp,\n                photoSwipeUIDefault.default,\n                images.infos,\n                {\n                  shareButtons:\n                    i18n[routeLocale.value].buttons || i18n[\"/\"].buttons,\n                  ...options,\n                  index,\n                }\n              );\n              gallery.init();\n            });\n          });\n        });\n      });\n    };\n\n    const update = (): void => {\n      const timer = setInterval(() => {\n        const content = document.querySelector<HTMLElement>(imageContainer);\n        if (content) {\n          initPhotoSwipe();\n          clearInterval(timer);\n        }\n      }, delay);\n    };\n\n    watch(\n      () => route.path,\n      () => update()\n    );\n\n    onMounted(() => update());\n\n    return { i18n };\n  },\n});\n</script>\n"],"names":["imageContainer","IMAGE_CONTAINER","imageSelector","IMAGE_SELECTOR","i18n","PHOTOSWIPE_I18N","delay","PHOTOSWIPE_DELAY","options","PHOTOSWIPE_OPTIONS","getImageInfo","image","src","w","naturalWidth","h","naturalHeight","title","alt","defineComponent","name","[object Object]","route","useRoute","routeLocale","useRouteLocale","initPhotoSwipe","pswp","document","querySelector","Promise","all","import","then","photoSwipe","photoSwipeUIDefault","selector","promises","images","Array","from","querySelectorAll","forEach","index","resolve","reject","complete","onload","onerror","err","infos","elements","getImages","addEventListener","default","shareButtons","value","buttons","init","update","timer","setInterval","clearInterval","watch","path","onMounted","class","tabindex","role","aria-hidden","_createVNode","_createCommentVNode","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_ctx","close","aria-label","share","fullscreen","zoom","_hoisted_8","_hoisted_9","prev","next","_hoisted_10"],"mappings":"4UASO,MAAMA,EAAiBC,gBACjBC,EAAgBC,eAEhBC,EAAOC,gBAEPC,EAAQC,iBAERC,EAAUC,mBCVVC,EAAgBC,IACpB,CACLC,IAAKD,EAAMC,IACXC,EAAGF,EAAMG,aACTC,EAAGJ,EAAMK,cACTC,MAAON,EAAMO,MCoFjB,MAAeC,EAAgB,CAC7BC,KAAM,aAENC,QACE,MAAMC,EAAQC,IACRC,EAAcC,IAEdC,EAAiB,KACrB,MAAMC,EAAOC,SAASC,cAAc,SAE/BC,QAAQC,IAAI,CACfC,OAA6C,cAC7CA,OACwC,2CAEvCC,MAAK,EAAEC,EAAYC,MD1FH,CAACC,IACxB,MAAMC,EAA2C,GAC3CC,EAASC,MAAMC,KACnBZ,SAASa,iBAAmCL,IAa9C,OAVAE,EAAOI,SAAQ,CAAC/B,EAAOgC,KACrBN,EAASM,GAAS,IAAIb,SAAQ,CAACc,EAASC,KAClClC,EAAMmC,SAAUF,EAAQlC,EAAaC,KAEvCA,EAAMoC,OAAS,IAAYH,EAAQlC,EAAaC,IAChDA,EAAMqC,QAAWC,GAAcJ,EAAOI,UAKrCnB,QAAQC,IAAIM,GAAUJ,MAAMiB,KAAaC,SAAUb,EAAQY,MAAAA,OC2EvDE,CAAUlD,GAAe+B,MAAMK,IAClCA,EAAOa,SAAST,SAAQ,CAAC/B,EAAOgC,KAC9BhC,EAAM0C,iBAAiB,SAAS,KACd,IAAInB,EAAWoB,QAC7B3B,EACAQ,EAAoBmB,QACpBhB,EAAOY,MACP,CACEK,aACEnD,EAAKoB,EAAYgC,OAAOC,SAAWrD,EAAK,KAAKqD,WAC5CjD,EACHmC,MAAAA,IAGIe,oBAOZC,EAAS,KACb,MAAMC,EAAQC,aAAY,KACRjC,SAASC,cAA2B7B,KAElD0B,IACAoC,cAAcF,MAEftD,IAUL,OAPAyD,GACE,IAAMzC,EAAM0C,OACZ,IAAML,MAGRM,GAAU,IAAMN,MAET,CAAEvD,KAAAA,eCnJN8D,MAAM,OAAOC,SAAS,KAAKC,KAAK,SAASC,cAAY,UAGxDC,SAAKJ,MAAM,wBAGNA,MAAM,uBAETI,SAAKJ,MAAM,oBACTK,wEACAD,SAAKJ,MAAM,eACXI,SAAKJ,MAAM,eACXI,SAAKJ,MAAM,uBAIRA,MAAM,gCACJA,MAAM,mBAGTI,SAAKJ,MAAM,4BA4BXI,SAAKJ,MAAM,oBACTI,SAAKJ,MAAM,yBACTI,SAAKJ,MAAM,yBACTI,SAAKJ,MAAM,sCAMnBI,SACEJ,MAAM,iEAENI,SAAKJ,MAAM,+BAebI,SAAKJ,MAAM,kBACTI,SAAKJ,MAAM,mFA7EnBK,yDACAD,QAAAE,GACED,2GAEAE,EAEAF,4CACAD,QAAAI,GACEH,0FACAI,EAOAJ,wFACAD,QAAAM,GACEN,QAAAO,GACEN,6DAEAO,EAEAR,YACEJ,MAAM,mCACLjD,MAAO8D,OAAKC,MACZC,aAAYF,OAAKC,sCAGpBV,YACEJ,MAAM,mCACLjD,MAAO8D,OAAKG,MACZD,aAAYF,OAAKG,sCAGpBZ,YACEJ,MAAM,gCACLjD,MAAO8D,OAAKI,WACZF,aAAYF,OAAKI,2CAGpBb,YACEJ,MAAM,kCACLjD,MAAO8D,OAAKK,KACZH,aAAYF,OAAKK,qCAGpBb,+DACAA,gFACAc,IASFC,EAMAhB,YACEJ,MAAM,yCACLjD,MAAO8D,OAAKQ,KACZN,aAAYF,OAAKQ,qCAGpBjB,YACEJ,MAAM,0CACLjD,MAAO8D,OAAKS,KACZP,aAAYF,OAAKS,qCAGpBC"}