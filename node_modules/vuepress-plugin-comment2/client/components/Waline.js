import{useThemePluginConfig as e}from"@mr-hope/vuepress-shared/client";import{usePageLang as l,usePageFrontmatter as o,useRouteLocale as t}from"@vuepress/client";import a from"@waline/client";import{defineComponent as n,computed as i,onMounted as r,onBeforeUnmount as s,watch as m,nextTick as c,h as u}from"vue";import{useRoute as p}from"vue-router";import"../styles/waline.scss";const v=COMMENT_OPTIONS,d=Boolean(v&&"waline"===v.type&&v.serverURL),h=WALINE_I18N;var w=n({name:"Waline",setup(){const n=l(),w=o(),f=p(),N=t(),g=e("comment");let j=null,T=null;const y=i((()=>{if(!d)return!1;const e=g.value.comment,l=!1!==v.comment,o=w.value.comment;return Boolean(o)||Boolean(l)&&!1!==o||!1!==e&&!1!==l&&!1!==o})),b=i((()=>(l=>{const o=e("comment");if(!d)return!1;const t=o.value.pageviews,a=!1!==v.pageviews,n=l.pageviews;return Boolean(n)||Boolean(a)&&!1!==n||!1!==t&&!1!==a&&!1!==n})(w.value))),B=()=>{T=a({lang:"zh-CN"===n.value?"zh-CN":"en",locale:{placeholder:h[N.value],...v.locale||{}},emoji:["https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/weibo","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/bilibili"],dark:'body[data-theme="dark"]',...v,el:"#waline-comment",visitor:b.value})};return r((()=>{d&&(j=setTimeout((()=>B()),1e3))})),s((()=>{j&&clearTimeout(j),T&&T.destroy()})),m((()=>f.path),(()=>c((()=>{j&&clearTimeout(j),d&&(j=setTimeout((()=>{T?T.update({lang:"zh-CN"===n.value?"zh-CN":"en",locale:{placeholder:h[N.value],...v.locale||{}}}):B()}),1e3))})))),()=>u("div",{class:"waline-wrapper",style:{display:y.value?"block":"none"},innerHTML:'<div id="waline-comment" />'})}});export default w;
//# sourceMappingURL=Waline.js.map
