"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.resolveTheme = void 0;
const resolveThemeLayouts_1 = require("./resolveThemeLayouts");
const resolveThemePlugin_1 = require("./resolveThemePlugin");
/**
 * Recursively resolve plugins and layouts of theme and its parent theme
 */
const resolveTheme = (app, themeName) => {
    const themePlugin = resolveThemePlugin_1.resolveThemePlugin(app, themeName);
    const themeLayouts = resolveThemeLayouts_1.resolveThemeLayouts(themePlugin.layouts);
    if (!themePlugin.extends) {
        return {
            plugins: [themePlugin],
            layouts: themeLayouts,
        };
    }
    const parentTheme = exports.resolveTheme(app, themePlugin.extends);
    return {
        plugins: [...parentTheme.plugins, themePlugin],
        layouts: {
            ...parentTheme.layouts,
            ...themeLayouts,
        },
    };
};
exports.resolveTheme = resolveTheme;
