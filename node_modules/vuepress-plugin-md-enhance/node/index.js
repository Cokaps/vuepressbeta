"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@vuepress/utils"),t=require("vuepress-plugin-sass-palette"),n=require("markdown-it/lib/token"),o=require("markdown-it/lib/helpers/parse_link_label"),r=require("katex"),s=require("@mr-hope/vuepress-shared");function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=l(n),a=l(o),c=l(r);const p=(t,n)=>{const{nesting:o,info:r}=t[n],s=/\[(.*)\]/u.exec(r),l=/^ demo\s*(?:\[.*?\])?\s*(.*)\s*$/u.exec(r);if(-1===o)return'\n    </div>\n  </div>\n  <div class="code-demo-footer"></div>\n</div>\n';let i="";const a={};for(let e=n;e<t.length;e++){const{type:n,content:o,info:r}=t[e];if("container_demo_close"===n)break;o&&("fence"===n&&("json"===r?i=encodeURIComponent(o):a[r]=o))}return`\n<div id="code-demo-${e.hash(a)}" class="code-demo-wrapper" ${s?`data-type="${encodeURIComponent(s[1])}"`:""} ${l?`data-title="${encodeURIComponent(l[1])}"`:""} ${i?`data-config="${i}"`:""} data-code="${encodeURIComponent(JSON.stringify(a))}">\n  <div class="demo-wrapper">\n    <div class="code-demo-app"></div>\n  </div>\n  <div class="code-wrapper">\n    <div class="code">\n`},u={jsLib:[],cssLib:[],codepenLayout:"left",codepenJsProcessor:"babel",codepenEditors:"101",vue:"https://cdn.jsdelivr.net/npm/vue@next/dist/vue.global.prod.js",react:"https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js",reactDOM:"https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"},f=(e,t)=>e[t].meta.subId>0?`:${e[t].meta.subId}`:"",d=(e,t,n,o)=>`${"string"==typeof o.docId?`-${o.docId}-`:""}${(e[t].meta.id+1).toString()}`,h=(e,t)=>`[${(e[t].meta.id+1).toString()}${f(e,t)}]`,m=(e,t,n,o,r)=>{const s=r.rules.footnoteAnchorName(e,t,n,o,r);return`<sup class="footnote-ref"><a href="#footnote${s}">${r.rules.footnoteCaption(e,t,n,o,r)}</a><a class="footnote-anchor" id="footnote-ref${s}${f(e,t)}" /></sup>`},k=(e,t,n)=>(n.xhtmlOut?'<hr class="footnotes-sep" />\n':'<hr class="footnotes-sep">\n')+'<section class="footnotes">\n<ol class="footnotes-list">\n',b=()=>"</ol>\n</section>\n",g=(e,t,n,o,r)=>`<li id="footnote${r.rules.footnoteAnchorName(e,t,n,o,r)}${f(e,t)}" class="footnote-item">`,v=()=>"</li>\n",$=(e,t,n,o,r)=>` <a href="#footnote-ref${r.rules.footnoteAnchorName(e,t,n,o,r)}${f(e,t)}" class="footnote-backref">↩︎</a>`,A=(e,t,n,o)=>{let r,s,l,a;const c=e.bMarks[t]+e.tShift[t],p=e.eMarks[t];if(c+4>p)return!1;if("["!==e.src.charAt(c))return!1;if("^"!==e.src.charAt(c+1))return!1;for(r=c+2;r<p;r++){if(" "===e.src.charAt(r))return!1;if("]"===e.src.charAt(r))break}if(r===c+2)return!1;if(r+1>=p||":"!==e.src.charAt(++r))return!1;if(o)return!0;r+=1,e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.refs||(e.env.footnotes.refs={});const u=e.src.slice(c+2,r-2);e.env.footnotes.refs[`:${u}`]=-1,s=new i.default("footnoteReferenceOpen","",1),s.meta={label:u},s.level=e.level++,e.tokens.push(s);const f=e.bMarks[t],d=e.tShift[t],h=e.sCount[t],m=e.parentType,k=r,b=e.sCount[t]+r-(e.bMarks[t]+e.tShift[t]);for(l=e.sCount[t]+r-(e.bMarks[t]+e.tShift[t]);r<p;){if(a=e.src.charAt(r),"\t"===a)l+=4-l%4;else{if(" "!==a)break;l+=1}r+=1}return e.tShift[t]=r-k,e.sCount[t]=l-b,e.bMarks[t]=k,e.blkIndent+=4,e.parentType="footnote",e.sCount[t]<e.blkIndent&&(e.sCount[t]+=e.blkIndent),e.md.block.tokenize(e,t,n),e.parentType=m,e.blkIndent-=4,e.tShift[t]=d,e.sCount[t]=h,e.bMarks[t]=f,s=new i.default("footnoteReferenceClose","",-1),s.level=--e.level,e.tokens.push(s),!0},_=(e,t)=>{let n,o,r;const s=e.posMax,l=e.pos;if(l+2>=s)return!1;if("^"!==e.src.charAt(l))return!1;if("["!==e.src.charAt(l+1))return!1;const i=l+2,c=a.default(e,l+1);return!(c<0)&&(t||(e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.list||(e.env.footnotes.list=[]),n=e.env.footnotes.list.length,e.md.inline.parse(e.src.slice(i,c),e.md,e.env,r=[]),o=e.push("footnoteRef","",0),o.meta={id:n},e.env.footnotes.list[n]={content:e.src.slice(i,c),tokens:r}),e.pos=c+1,e.posMax=s,!0)},M=(e,t)=>{let n,o,r,s;const l=e.posMax,i=e.pos;if(i+3>l)return!1;if(!e.env.footnotes||!e.env.footnotes.refs)return!1;if("["!==e.src.charAt(i))return!1;if("^"!==e.src.charAt(i+1))return!1;for(n=i+2;n<l;n++){if(" "===e.src.charAt(n))return!1;if("\n"===e.src.charAt(n))return!1;if("]"===e.src.charAt(n))break}if(n===i+2)return!1;if(n>=l)return!1;n+=1;const a=e.src.slice(i+2,n-1);return void 0!==e.env.footnotes.refs[`:${a}`]&&(t||(e.env.footnotes.list||(e.env.footnotes.list=[]),e.env.footnotes.refs[`:${a}`]<0?(o=e.env.footnotes.list.length,e.env.footnotes.list[o]={label:a,count:0},e.env.footnotes.refs[`:${a}`]=o):o=e.env.footnotes.refs[`:${a}`],r=e.env.footnotes.list[o].count,e.env.footnotes.list[o].count=e.env.footnotes.list[o].count+1,s=e.push("footnoteRef","",0),s.meta={id:o,subId:r,label:a}),e.pos=n,e.posMax=l,!0)},x=e=>{let t,n,o,r,s,l=!1;const a={};if(!e.env.footnotes)return!1;if(e.tokens=e.tokens.filter((e=>"footnoteReferenceOpen"===e.type?(l=!0,r=[],s=e.meta.label,!1):"footnoteReferenceClose"===e.type?(l=!1,a[`:${s}`]=r,!1):(l&&r.push(e),!l))),!e.env.footnotes.list)return!1;const{list:c}=e.env.footnotes;n=new i.default("footnoteBlockOpen","",1),e.tokens.push(n);for(let r=0,{length:s}=c;r<s;r++){n=new i.default("footnoteOpen","",1),n.meta={id:r,label:c[r].label},e.tokens.push(n),c[r].tokens?(o=[],n=new i.default("paragraph_open","p",1),n.block=!0,o.push(n),n=new i.default("inline","",0),n.children=c[r].tokens,n.content=c[r].content,o.push(n),n=new i.default("paragraph_close","p",-1),n.block=!0,o.push(n)):o=c[r].label?a[`:${c[r].label}`]:[],e.tokens=e.tokens.concat(o),t="paragraph_close"===e.tokens[e.tokens.length-1].type&&e.tokens.pop()||null;for(let t=0;t<(Number(c[r].count)>0?c[r].count:1);t++)n=new i.default("footnoteAnchor","",0),n.meta={id:r,subId:t,label:c[r].label},e.tokens.push(n);t&&e.tokens.push(t),n=new i.default("footnoteClose","",-1),e.tokens.push(n)}return n=new i.default("footnoteBlockClose","",-1),e.tokens.push(n),!0},y=e=>{e.renderer.rules.footnoteRef=m,e.renderer.rules.footnoteBlockOpen=k,e.renderer.rules.footnoteBlockClose=b,e.renderer.rules.footnoteOpen=g,e.renderer.rules.footnoteClose=v,e.renderer.rules.footnoteAnchor=$,e.renderer.rules.footnoteCaption=h,e.renderer.rules.footnoteAnchorName=d,e.block.ruler.before("reference","footnoteDef",A,{alt:["paragraph","reference"]}),e.inline.ruler.after("image","footnoteInline",_),e.inline.ruler.after("footnoteInline","footnoteRef",M),e.core.ruler.after("inline","footnoteTail",x)},E=/\\([ \\!"#$%&'()*+,./:;<=>?@[\]^_`{|}~-])/gu,O=(e,t,n)=>{const o=e.attrIndex(t),r=[t,n];o<0?e.attrPush(r):e.attrs[o]=r},C=(e,t)=>{const n=e[t].level-1;for(let o=t-1;o>=0;o--)if(e[o].level===n)return o;return-1},I=e=>e.replace(/&/gu,"&amp;").replace(/</gu,"&lt;").replace(/>/gu,"&gt;").replace(/"/gu,"&quot;").replace(/'/gu,"&#039;"),N=(e,t)=>{const n=t>0?e.src.charAt(t-1):"",o=t+1<=e.posMax?e.src.charAt(t+1):"";return{canOpen:" "!==o&&"\t"!==o,canClose:!(" "===n||"\t"===n||/[0-9]/u.exec(o))}},R=(e,t)=>{let n,o,r,s;if("$"!==e.src[e.pos])return!1;if(r=N(e,e.pos),!r.canOpen)return t||(e.pending+="$"),e.pos+=1,!0;const l=e.pos+1;for(n=l;-1!==(n=e.src.indexOf("$",n));){for(o=n-1;"\\"===e.src[o];)o-=1;if((n-o)%2==1)break;n+=1}return-1===n?(t||(e.pending+="$"),e.pos=l,!0):n-l==0?(t||(e.pending+="$$"),e.pos=l+1,!0):(r=N(e,n),r.canClose?(t||(s=e.push("inlineTex","math",0),s.markup="$",s.content=e.src.slice(l,n)),e.pos=n+1,!0):(t||(e.pending+="$"),e.pos=l,!0))},j=(e,t,n,o)=>{let r,s,l,i,a=!1,c=e.bMarks[t]+e.tShift[t],p=e.eMarks[t];if(c+2>p)return!1;if("$$"!==e.src.slice(c,c+2))return!1;if(c+=2,r=e.src.slice(c,p),o)return!0;for(r.trim().endsWith("$$")&&(r=r.trim().slice(0,-2),a=!0),l=t;!a&&(l+=1,!(l>=n))&&(c=e.bMarks[l]+e.tShift[l],p=e.eMarks[l],!(c<p&&e.tShift[l]<e.blkIndent));)e.src.slice(c,p).trim().endsWith("$$")&&(i=e.src.slice(0,p).lastIndexOf("$$"),s=e.src.slice(c,i),a=!0);e.line=l+1;const u=e.push("blockTex","math",0);return u.block=!0,u.content=(r?.trim()?`${r}\n`:"")+e.getLines(t+1,l,e.tShift[t],!0)+(s?.trim()?s:""),u.map=[t,e.line],u.markup="$$",!0},T=(e,t={throwOnError:!1})=>{const n={...t,output:"html"};e.inline.ruler.after("escape","inlineTex",R),e.block.ruler.after("blockquote","blockTex",j,{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.inlineTex=(e,t)=>((e,t)=>{t.displayMode=!1;try{return c.default.renderToString(e,t)}catch(n){return t.throwOnError&&console.warn(n),`<span class='katex-error' title='${I(n.toString())}'>${I(e)}</span>`}})(e[t].content,n),e.renderer.rules.blockTex=(e,t)=>`${((e,t)=>{t.displayMode=!0;try{return`<p class='katex-block'>${c.default.renderToString(e,t)}</p>`}catch(n){return t.throwOnError&&console.warn(n),`<p class='katex-block katex-error' title='${I(n.toString())}'>${I(e)}</p>`}})(e[t].content,n)}\n`},S=(e,t)=>{const n=e.pos,o=e.src.charAt(n);if(t||"="!==o)return!1;const r=e.scanDelims(e.pos,!0);let s,{length:l}=r;if(l<2)return!1;l%2&&(s=e.push("text","",0),s.content=o,l-=1);for(let t=0;t<l;t+=2)s=e.push("text","",0),s.content=`${o}${o}`,(r.can_open||r.can_close)&&e.delimiters.push({marker:61,length:0,jump:t/2,token:e.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0},w=(e,t)=>{let n;const o=[],r=t.length;for(let s=0;s<r;s++){const r=t[s];if(61===r.marker&&-1!==r.end){const s=t[r.end];n=e.tokens[r.token],n.type="mark_open",n.tag="mark",n.nesting=1,n.markup="==",n.content="",n=e.tokens[s.token],n.type="mark_close",n.tag="mark",n.nesting=-1,n.markup="==",n.content="","text"===e.tokens[s.token-1].type&&"="===e.tokens[s.token-1].content&&o.push(s.token-1)}}for(;o.length;){const t=o.pop();let r=t+1;for(;r<e.tokens.length&&"mark_close"===e.tokens[r].type;)r+=1;r-=1,t!==r&&(n=e.tokens[r],e.tokens[r]=e.tokens[t],e.tokens[t]=n)}},D=e=>{e.inline.ruler.before("emphasis","mark",S),e.inline.ruler2.before("emphasis","mark",(e=>{const t=e.tokens_meta||[];w(e,e.delimiters);for(let n=0;n<t.length;n++){const o=t[n];o?.delimiters&&w(e,o.delimiters)}return!0}))},L=(t,n)=>{const o=t[n],r=`mermaid-${e.hash(n)}`,{content:s}=o;return`<Mermaid id="${r}" data-code="${encodeURIComponent(s)}"></Mermaid>`},P=(t,n,o)=>`<Mermaid id="mermaid-${e.hash(o)}" data-code="${encodeURIComponent(`${t}\n${n.split("\n").map((e=>e?`    ${e}`:"")).join("\n")}`)}"></Mermaid>`,q=e=>{const t=e.renderer.rules.fence;e.renderer.rules.fence=(...e)=>{const[n,o]=e,{content:r,info:s}=n[o];return"mermaid"===s.trim()?L(n,o):"sequence"===s.trim()?P("sequenceDiagram",r,o):"class"===s.trim()?P("classDiagram",r,o):"state"===s.trim()?P("stateDiagram-v2",r,o):"er"===s.trim()?P("erDiagram",r,o):"journey"===s.trim()?P("journey",r,o):"gantt"===s.trim()?P("gantt",r,o):"pie"===s.trim()?P("pie",r,o):t(...e)},e.renderer.rules.mermaid=L},U=t=>{t.block.ruler.before("fence","presentation",(e=>{const t=`@${e.open}`,n=`@${e.close}`;return(o,r,s,l)=>{let i,a,c=!1,p=o.bMarks[r]+o.tShift[r],u=o.eMarks[r];if("@"!==o.src.charAt(p))return!1;for(a=0;a<t.length;++a)if(t[a]!==o.src[p+a])return!1;const f=o.src.slice(p,p+a),d=o.src.slice(p+a,u);if(l)return!0;for(i=r;!(i>=s||(p=o.bMarks[i]+o.tShift[i],u=o.eMarks[i],p<u&&o.sCount[i]<o.blkIndent));i+=1)if("@"===o.src.charAt(p)&&o.sCount[i]<=o.sCount[r]){let e=!0;for(a=0;a<n.length;++a)if(n[a]!==o.src[p+a]){e=!1;break}if(e&&o.skipSpaces(p+a)>=u){c=!0;break}}const h=o.src.split("\n").slice(r+1,i).join("\n"),m=o.push(e.name,"fence",0);return m.block=!0,m.info=d,m.content=h,m.map=[r,i],m.markup=f,o.line=i+(c?1:0),!0}})({name:"presentation",open:"slidestart",close:"slideend"}),{alt:["paragraph","reference","blockquote","list"]}),t.renderer.rules.presentation=(t,n)=>{const o=t[n],r=`presentation-${e.hash(n)}`,{content:s,info:l}=o;return`<Presentation id="${r}" data-code="${encodeURIComponent(s)}" theme="${l.trim()||"auto"}"></Presentation>`}},H=(e,t)=>{let n,o;const r=e.posMax,s=e.pos;if("~"!==e.src.charAt(s))return!1;if(t)return!1;if(s+2>=r)return!1;for(e.pos=s+1;e.pos<r;){if("~"===e.src.charAt(e.pos)){n=!0;break}e.md.inline.skipToken(e)}if(!n||s+1===e.pos)return e.pos=s,!1;const l=e.src.slice(s+1,e.pos);return/(^|[^\\])(\\\\)*\s/u.exec(l)?(e.pos=s,!1):(e.posMax=e.pos,e.pos=s+1,o=e.push("sub_open","sub",1),o.markup="~",o=e.push("text","",0),o.content=l.replace(E,"$1"),o=e.push("sub_close","sub",-1),o.markup="~",e.pos=e.posMax+1,e.posMax=r,!0)},W=e=>{e.inline.ruler.after("emphasis","sub",H)},G=(e,t)=>{let n,o;const r=e.posMax,s=e.pos;if("^"!==e.src.charAt(s))return!1;if(t)return!1;if(s+2>=r)return!1;for(e.pos=s+1;e.pos<r;){if("^"===e.src.charAt(e.pos)){n=!0;break}e.md.inline.skipToken(e)}if(!n||s+1===e.pos)return e.pos=s,!1;const l=e.src.slice(s+1,e.pos);return/(^|[^\\])(\\\\)*\s/u.exec(l)?(e.pos=s,!1):(e.posMax=e.pos,e.pos=s+1,o=e.push("sup_open","sup",1),o.markup="^",o=e.push("text","",0),o.content=l.replace(E,"$1"),o=e.push("sup_close","sup",-1),o.markup="^",e.pos=e.posMax+1,e.posMax=r,!0)},z=e=>{e.inline.ruler.after("emphasis","sup",G)},K=(e,t)=>"inline"===e[t].type&&(e=>"paragraph_open"===e.type)(e[t-1])&&(e=>"list_item_open"===e.type)(e[t-2])&&(e=>0===e.content.indexOf("[ ] ")||0===e.content.indexOf("[x] ")||0===e.content.indexOf("[X] "))(e[t]),B=(e,t,n)=>{if(e.children=e.children||[],e.children.unshift((e=>{const t=new i.default("html_inline","",0);return t.content=`<input type="checkbox" class="task-list-item-checkbox" ${0===e.content.indexOf("[ ] ")?"":'checked="checked"'} disabled="disabled">`,t})(e)),e.children[1].content=e.children[1].content.slice(3),e.content=e.content.slice(3),n.label)if(n.labelAfter){e.children.pop();const n="task-item-"+t.env.tasklists++;e.children[0].content=e.children[0].content.slice(0,-1)+' id="'+n+'">',e.children.push(((e,t)=>{const n=new i.default("html_inline","",0);return n.content='<label class="task-list-item-label" for="'+t+'">'+e+"</label>",n.attrs=[["for",t]],n})(e.content,n))}else e.children.unshift((()=>{const e=new i.default("html_inline","",0);return e.content="<label>",e})()),e.children.push((()=>{const e=new i.default("html_inline","",0);return e.content="</label>",e})())},V=(e,{label:t=!0,labelAfter:n=!0}={})=>{e.core.ruler.after("inline","github-task-lists",(e=>{const o=e.tokens;e.env.tasklists||(e.env.tasklists=0);for(let r=2;r<o.length;r++)K(o,r)&&(B(o[r],e,{label:t,labelAfter:n}),O(o[r-2],"class","task-list-item"),O(o[C(o,r-2)],"class","task-list-container"));return!0}))},F={info:{"/zh/":"相关信息","/en/":"Info","/de/":"Information","/vi/":"Thông tin"},tip:{"/zh/":"提示","/en/":"Tips","/de/":"Tips","/vi/":"Tips"},warning:{"/zh/":"注意","/en/":"Note","/de/":"Notiz","/vi/":"Lưu ý"},danger:{"/zh/":"警告","/en/":"Warning","/de/":"Warnung","/vi/":"Cẩn thận"},detail:{"/zh/":"详情","/en/":"Detail","/de/":"Details","/vi/":"Chi tiết"}};exports.default=(n,o)=>{const{themeConfig:r}=o.options,l=0===Object.keys(n).length?r.mdEnhance||{}:n,i=l.enableAll||l.align||!1,a=l.enableAll||l.demo||!1,c=l.enableAll||l.footnote||!1,f=l.enableAll||l.tasklist||!1,d=l.enableAll||Boolean(l.mermaid)||!1,h=l.enableAll||Boolean(l.presentation)||!1,m=l.enableAll||Boolean(l.tex)||!1,k="object"==typeof l.presentation&&Array.isArray(l.presentation.plugins)?l.presentation.plugins:[];return t.usePalettePlugin(o,{id:"hope"}),((e,t)=>{const n=t=>{const n={};for(const e in t)n[e]={defaultInfo:t[e]};return n["/"]={defaultInfo:t[s.getRootLangPath(e)]},n};(t.customContainer||t.enableAll)&&(["info","tip","warning","danger"].forEach((t=>e.use("@vuepress/container",{type:t,locales:n(F[t])}))),e.use("@vuepress/container",{type:"details",before:e=>`<details class="custom-block details"><summary>${e||"Details"}</summary>\n`,after:()=>"</details>\n"}));(t.align||t.enableAll)&&["left","center","right","justify"].forEach((t=>e.use("@vuepress/container",{type:t}))),(t.demo||t.enableAll)&&e.use("@vuepress/container",{type:"demo",render:p})})(o,l),{name:"vuepress-plugin-md-enhance",alias:{"@Mermaid":d?e.path.resolve(__dirname,"../client/components/Mermaid.js"):"@mr-hope/vuepress-shared/client/noopModule.js","@Presentation":h?e.path.resolve(__dirname,"../client/components/Presentation.js"):"@mr-hope/vuepress-shared/client/noopModule.js"},define:()=>({MARKDOWN_DELAY:l.delay||500,MARKDOWN_ENHANCE_ALIGN:i,MARKDOWN_ENHANCE_FOOTNOTE:c,MARKDOWN_ENHANCE_MERMAID:d,MARKDOWN_ENHANCE_PRESENTATION:h,MARKDOWN_ENHANCE_TASKLIST:f,MARKDOWN_ENHANCE_TEX:m,CODE_DEMO_OPTIONS:{...u,..."object"==typeof l.demo?l.demo:{}},MERMAID_OPTIONS:"object"==typeof l.mermaid?l.mermaid:{},REVEAL_CONFIG:"object"==typeof l.presentation&&"object"==typeof l.presentation.revealConfig?l.presentation.revealConfig:{},REVEAL_PLUGIN_HIGHLIGHT:k.includes("highlight"),REVEAL_PLUGIN_MATH:k.includes("math"),REVEAL_PLUGIN_NOTES:k.includes("notes"),REVEAL_PLUGIN_SEARCH:k.includes("search"),REVEAL_PLUGIN_ZOOM:k.includes("zoom")}),...a?{clientAppSetupFiles:e.path.resolve(__dirname,"../client/appSetup.js")}:{},clientAppEnhanceFiles:e.path.resolve(__dirname,"../client/appEnhance.js"),extendsMarkdown:e=>{(l.sup||l.enableAll)&&e.use(z),(l.sub||l.enableAll)&&e.use(W),c&&e.use(y),(l.mark||l.enableAll)&&e.use(D),f&&e.use(V,["object"==typeof l.tasklist?l.tasklist:{}]),d&&e.use(q),m&&e.use(T,{macros:{"\\liiiint":"\\int\\!\\!\\!\\iiint","\\iiiint":"\\int\\!\\!\\!\\!\\iiint","\\idotsint":"\\int\\!\\cdots\\!\\int"},..."object"==typeof l.tex?l.tex:{}}),h&&e.use(U)}}};
//# sourceMappingURL=index.js.map
