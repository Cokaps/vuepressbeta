import { Plugin } from '@vuepress/core';
import { KatexOptions } from 'katex';

interface CodeDemoGlobalOptions {
    /**
     * 引入的 JS 外部库链接
     *
     * JS Libray links
     */
    jsLib: string[];
    /**
     * 引入的 CSS 外部库链接
     *
     * CSS Libray links
     */
    cssLib: string[];
    /**
     * 是否显示 JSFiddle 按钮
     *
     * Whether display JSFiddle button
     *
     * @default true
     */
    jsfiddle: boolean;
    /**
     * 是否显示 CodePen 按钮
     *
     * Whether display CodePen button
     *
     * @default true
     */
    codepen: boolean;
    /**
     * 是否水平显示代码和视图窗口
     *
     * Whether display code and output horizontally
     *
     * @default false
     */
    horizontal: false;
    /**
     * CodePen 编辑器布局
     *
     * CodePen editor layout
     *
     * @default "left"
     */
    codepenLayout: "top" | "left" | "right";
    /**
     * CodePen 编辑器显示情况
     *
     * CodePen Editor Display
     *
     * @default "101"
     */
    editors: "101" | "100" | "110" | "111" | "011" | "001" | "010";
    /**
     * Vue lib address
     *
     * @default "https://cdn.jsdelivr.net/npm/vue@next/dist/vue.global.prod.js"
     */
    vue: string;
    /**
     * React lib address
     *
     * @default "https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js"
     */
    react: string;
    /**
     * ReactDOM lib address
     *
     * @default "https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"
     */
    reactDOM: string;
}
declare type CodeDemoOptions = Omit<CodeDemoGlobalOptions, "vue" | "react" | "reactDOM">;

/**
 * This is added just because reveal.js do not have official type declaration files
 */
interface RevealOptions {
    /**
     * The "normal" size of the presentation, aspect ratio will be preserved when the presentation is scaled to fit different resolutions.
     *
     * Can be specified using percentage units.
     */
    width: number;
    height: number;
    /** Factor of the display size that should remain empty around the content */
    margin: number;
    /** Bounds for smallest/largest possible scale to apply to content */
    minScale: number;
    maxScale: number;
    /** Display presentation control arrows */
    controls: boolean;
    /** Help the user learn the controls by providing hints, for example by bouncing the down arrow when they first encounter a vertical slide */
    controlsTutorial: boolean;
    /** Determines where controls appear */
    controlsLayout: "bottom-right" | "edges";
    /** Visibility rule for backwards navigation arrows */
    controlsBackArrows: "faded" | "hidden" | "visible";
    /** Display a presentation progress bar */
    progress: boolean;
    /**
     * Display the page number of the current slide
     * - true:    Show slide number
     * - false:   Hide slide number
     *
     * Can optionally be set as a string that specifies the number formatting:
     * - "h.v":   Horizontal . vertical slide number (default)
     * - "h/v":   Horizontal / vertical slide number
     * - "c":   Flattened slide number
     * - "c/t":   Flattened slide number / total slides
     *
     * Alternatively, you can provide a function that returns the slide
     * number for the current slide. The function should take in a slide
     * object and return an array with one string [slideNumber] or
     * three strings [n1,delimiter,n2]. See #formatSlideNumber().
     */
    slideNumber: boolean | "h.v" | "h/v" | "c" | "c/t" | ((slideObject: any) => [string] | [string, string, string]);
    /**
     * Can be used to limit the contexts in which the slide number appears
     *
     * - "all":      Always show the slide number
     * - "print":    Only when printing to PDF
     * - "speaker":  Only in the speaker view
     */
    showSlideNumber: "all" | "print" | "speaker";
    /** Use 1 based indexing for # links to match slide number (default is zero based) */
    hashOneBasedIndex: boolean;
    /** Add the current slide number to the URL hash so that reloading the page/copying the URL will return you to the same slide */
    hash: boolean;
    /** Flags if we should monitor the hash and change slides accordingly */
    respondToHashChanges: boolean;
    /** Push each slide change to the browser history.  Implies `hash: true` */
    history: boolean;
    /** Enable keyboard shortcuts for navigation */
    keyboard: boolean;
    /**
     * Optional function that blocks keyboard events when retuning false
     *
     * If you set this to 'focused', we will only capture keyboard events
     * for embdedded decks when they are in focus
     */
    keyboardCondition: null | "focused" | ((event: KeyboardEvent) => boolean);
    /** Disables the default reveal.js slide layout (scaling and centering) so that you can use custom CSS layout */
    disableLayout: boolean;
    /** Enable the slide overview mode */
    overview: boolean;
    /** Vertical centering of slides */
    center: boolean;
    /** Enables touch navigation on devices with touch input */
    touch: boolean;
    /** Loop the presentation */
    loop: boolean;
    /** Change the presentation direction to be RTL */
    rtl: boolean;
    /**
     * Changes the behavior of our navigation directions.
     *
     * "default"
     * Left/right arrow keys step between horizontal slides, up/down
     * arrow keys step between vertical slides. Space key steps through
     * all slides (both horizontal and vertical).
     *
     * "linear"
     * Removes the up/down arrows. Left/right arrows step through all
     * slides (both horizontal and vertical).
     *
     * "grid"
     * When this is enabled, stepping left/right from a vertical stack
     * to an adjacent vertical stack will land you at the same vertical
     * index.
     *
     * Consider a deck with six slides ordered in two vertical stacks:
     * 1.1    2.1
     * 1.2    2.2
     * 1.3    2.3
     *
     * If you're on slide 1.3 and navigate right, you will normally move
     * from 1.3 -> 2.1. If "grid" is used, the same navigation takes you
     * from 1.3 -> 2.3.
     */
    navigationMode: "default" | "linear" | "grid";
    /** Randomizes the order of slides each time the presentation loads */
    shuffle: boolean;
    /** Turns fragments on and off globally */
    fragments: boolean;
    /** Flags whether to include the current fragment in the URL, so that reloading brings you to the same fragment position */
    fragmentInURL: boolean;
    /** Flags if the presentation is running in an embedded mode, i.e. contained within a limited portion of the screen */
    embedded: boolean;
    /** Flags if we should show a help overlay when the question-mark key is pressed */
    help: boolean;
    /**  Flags if it should be possible to pause the presentation (blackout) */
    pause: boolean;
    /** Flags if speaker notes should be visible to all viewers */
    showNotes: boolean;
    /**
     * Global override for autolaying embedded media (video/audio/iframe)
     *- null:   Media will only autoplay if data-autoplay is present
     *- true:   All media will autoplay, regardless of individual setting
     *- false:  No media will autoplay, regardless of individual setting
     */
    autoPlayMedia: null | boolean;
    /**
     * Global override for preloading lazy-loaded iframes
     * - null:   Iframes with data-src AND data-preload will be loaded when within
     *           the viewDistance, iframes with only data-src will be loaded when visible
     * - true:   All iframes with data-src will be loaded when within the viewDistance
     * - false:  All iframes with data-src will be loaded only when visible
     */
    preloadIframes: null | boolean;
    /** Can be used to globally disable auto-animation */
    autoAnimate: boolean;
    /** Optionally provide a custom element matcher that will be used to dictate which elements we can animate between. */
    autoAnimateMatcher: null;
    /** Default settings for our auto-animate transitions, can be overridden per-slide or per-element via data arguments */
    autoAnimateEasing: "ease" | "ease-in" | "ease-out" | "linear";
    autoAnimateDuration: number;
    autoAnimateUnmatched: boolean;
    /**
     * CSS properties that can be auto-animated.
     *
     * Position & scale is matched separately so there's no need to include styles like top/right/bottom/left, width/height or margin
     */
    autoAnimateStyles: string[];
    /**
     * Controls automatic progression to the next slide
     * - 0:      Auto-sliding only happens if the data-autoslide HTML attribute
     *           is present on the current slide or fragment
     * - 1+:     All slides will progress automatically at the given interval
     * - false:  No auto-sliding, even if data-autoslide is present
     */
    autoSlide: number | false;
    /** Stop auto-sliding after user input */
    autoSlideStoppable: boolean;
    /** Use this method for navigation when auto-sliding (defaults to navigateNext) */
    autoSlideMethod: null | any;
    /** Specify the average time in seconds that you think you will spend presenting each slide. This is used to show a pacing timer in the speaker view */
    defaultTiming: null | number;
    /** Enable slide navigation via mouse wheel */
    mouseWheel: boolean;
    /**
     * Opens links in an iframe preview overlay
     * Add `data-preview-link` and `data-preview-link="false"` to customise each link individually
     */
    previewLinks: boolean;
    /** Exposes the reveal.js API through window.postMessage */
    postMessage: boolean;
    /** Dispatches all reveal.js events to the parent window through postMessage */
    postMessageEvents: boolean;
    /** Focuses body when page changes visibility to ensure keyboard shortcuts work */
    focusBodyOnPageVisibilityChange: boolean;
    /** Transition style */
    transition: "none" | "slide" | "fade" | "convex" | "concave" | "zoom";
    /** Transition speed */
    transitionSpeed: "default" | "fast" | "slow";
    /** Transition style for full page slide backgrounds */
    backgroundTransition: "none" | "fade" | "slide" | "convex" | "concave" | "zoom";
    /** The maximum number of pages a single slide can expand onto when printing to PDF, unlimited by default */
    pdfMaxPagesPerSlide: number;
    /** Prints each fragment on a separate slide */
    pdfSeparateFragments: boolean;
    /**
     * Offset used to reduce the height of content within exported PDF pages.
     * This exists to account for environment differences based on how you
     * print to PDF. CLI printing options, like phantomjs and wkpdf, can end
     * on precisely the total height of the document whereas in-browser
     * printing has to end one pixel before.
     */
    pdfPageHeightOffset: number;
    /** Number of slides away from the current that are visible */
    viewDistance: number;
    /**
     * Number of slides away from the current that are visible on mobile devices.
     *
     * It is advisable to set this to a lower number than viewDistance in order to save resources.
     */
    mobileViewDistance: number;
    /** The display mode that will be used to show slides */
    display: "block";
    /** Hide cursor if inactive */
    hideInactiveCursor: boolean;
    /** Time before the cursor is hidden (in ms) */
    hideCursorTime: number;
    plugins: any[];
}

declare type RevealPlugin = "highlight" | "math" | "search" | "notes" | "zoom" | "anything" | "audio" | "chalkboard";
interface PresentationOptions {
    plugins?: RevealPlugin[];
    revealConfig?: Partial<RevealOptions>;
}

interface TaskListOptions {
    /**
     * Whether use `<label>` to wrap text
     *
     * 是否使用 `<label>` 来包裹文字
     *
     * @default true
     */
    label?: boolean;
    /**
     * Whether place `<label>` after `<input>` or wrap `<input>`
     *
     * 是否将 `<label>` 放置在 `<input>` 后还是包裹住 `<input>`
     *
     * @default true
     */
    labelAfter?: boolean;
}

/** md-enhance plugin configuration */
declare type MarkdownEnhanceOptions = Partial<{
    /**
     * 是否启用自定义容器
     *
     * - info
     * - tip
     * - warning
     * - danger
     * - details
     *
     * ⚠ 最后四个会和默认主题冲突，且可能会覆盖默认主题的样式与行为
     *
     * Whether to enable custom container including
     *
     * - info
     * - tip
     * - warning
     * - danger
     * - details
     *
     * ⚠ The last 4 is conflict with default theme and may overide it.
     *
     * @default false
     */
    customContainer: boolean;
    /**
     * 是否启用自定义对齐支持
     *
     * Whether to enable align support
     *
     * @default false
     */
    align: boolean;
    /**
     * 是否启用上角标格式支持
     *
     * Whether to enable superscript format support
     *
     * @default false
     */
    sup: boolean;
    /**
     * 是否启用下角标格式支持
     *
     * Whether to enable subscript format support
     *
     * @default false
     */
    sub: boolean;
    /**
     * 是否启用脚注格式支持
     *
     * Whether to enable footnote format support
     *
     * @default false
     */
    footnote: boolean;
    /**
     * 是否启用标注支持
     *
     * Whether to enable mark format support
     *
     * @default false
     */
    mark: boolean;
    /**
     * 是否启用任务里表支持
     *
     * Whether to enable tastlist format support
     *
     * @default false
     */
    tasklist: TaskListOptions | boolean;
    /**
     * 是否启用 TeX 语法支持
     *
     * Whether to enable TeX syntax support
     *
     * @default false
     */
    tex: KatexOptions | boolean;
    /**
     * 是否启用 Mermaid 流程图支持
     *
     * Whether to enable mermaid support
     *
     * @default false
     */
    mermaid: boolean;
    /**
     * 是否启用代码示例功能
     *
     * Whether to enable code-demo support
     *
     * @default false
     */
    demo: Partial<CodeDemoGlobalOptions> | boolean;
    /**
     * 是否启用幻灯片支持
     *
     * Whether to enable presentation support
     *
     * @default false
     */
    presentation: PresentationOptions | boolean;
    /**
     * 是否启用全部增强
     *
     * Whether to enable all features.
     *
     * @default false
     */
    enableAll: boolean;
    /**
     * 操作页面 DOM 的延时，单位 ms
     *
     * 如果你使用的主题有切换动画，建议配置此选项为 `切换动画时长 + 200`
     *
     * The delay of operating dom, in ms
     *
     * If the theme you are using has a switching animation, it is recommended to configure this option to `Switch animation duration + 200`
     *
     * @default 500
     */
    delay?: number;
}>;

declare const markdownEnhancePlugin: Plugin<MarkdownEnhanceOptions>;

export default markdownEnhancePlugin;
export { CodeDemoGlobalOptions, CodeDemoOptions, MarkdownEnhanceOptions, PresentationOptions, RevealPlugin };
